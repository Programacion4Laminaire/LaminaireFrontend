<div class="text-am-purple md:text-sm text-xs " *ngIf="!isLoading && withLabel"> {{label}}
    <ng-container *ngIf="mode!= 'read'">
        <span *ngIf="required" class="text-red">*</span>
    </ng-container>
</div>

<div class="animate-pulse bg-am-grey-light rounded h-5 min-w-36" *ngIf="isLoading && withLabel"></div>
<div class="animate-pulse bg-am-grey-light rounded h-13 mt-1 min-w-36" *ngIf="isLoading"></div>

<form appearance="outline" class="w-full" *ngIf="!isLoading">
    <div class="flex items-center justify-center bg-white border border-am-main-blue-light rounded-2xl overflow-hidden w-full mx-auto h-11">
        <input type="text" class="desktop border-0 h-11 ml-2 outline-none placeholder:text-secondary text-sm bg-card flex-auto" [placeholder]="placeholder" matInput
            [formControl]="inputControl" [matAutocomplete]="optionsAutocomplete" autocomplete="off">
            <!-- <input type="text" class="desktop border-0 h-11 ml-2 outline-none placeholder:text-secondary text-sm bg-card flex-auto" [placeholder]="placeholder" matInput
            [formControl]="inputControl" [matAutocomplete]="optionsAutocomplete" autocomplete="off"
            [disabled]="inputControl.disabled"> -->
        <ng-container *ngIf="mode!= 'read'">
            <button *ngIf="inputControl.value" @scaleInOut
                (click)="setVisibleOptions(inputControl.value, true); inputControl.reset();" class="mr-4"
                [ngClass]="{'text-gray' :inputControl.disabled, 'text-black':inputControl.enabled}" type="button"
                [disabled]="inputControl.disabled">
                <mat-icon fontIcon="close" class="flex-none text-xl"></mat-icon>
            </button>
            <mat-icon class="text-xl text-am-main-blue-light" fontIcon="arrow_drop_down"></mat-icon>
        </ng-container>
    </div>

    <mat-hint class="rounded p-2 flex items-start gap-2 w-full bg-am-base-background" *ngIf="hint_message">
        <mat-icon class="text-xl text-am-gray-dark" fontIcon="info"></mat-icon>
        <div class="text-xs break-words text-am-gray-dark" [innerHTML]="hint_message"></div>
    </mat-hint>

    <mat-error *ngIf="inputControl.hasError('optionInvalid')">* Seleccione una opción válida. </mat-error>
    <mat-error *ngIf="inputControl.hasError('required')">* Este campo es obligatorio. </mat-error>
    <mat-error *ngIf="inputControl.hasError('isEmptyArrayOptions')">* El listado esta vacio. </mat-error>

    <mat-autocomplete #optionsAutocomplete="matAutocomplete" [displayWith]="showDropdrown.bind(this)"
        (optionSelected)="setVisibleOptions($event.option.value, false)">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option.code"
            matTooltip="{{option.description}}" matToolTipPosition="after" matTooltipShowDelay="500"
            matTooltipHideDelay="100">
            {{option.description}}
        </mat-option>
    </mat-autocomplete>
</form>