.sidebar {
  background-color: #1d3664;
  transition: all 0.5s ease;
  position: fixed;
  z-index: 2;
  top: 0;
  width: 5rem;
  height: 100vh;
  box-shadow: 0.063rem 0 1.25rem 0 #1a294b;
  color: #fafdff;

  .logo-container {
    display: none;
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.3s ease;

    .head {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;

      .logo {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        line-height: 1.1;

        .logo-line-1 { color:#fff; font-size:2.2rem; font-weight:700; letter-spacing:.5px; }
        .logo-line-2 { color:#fff; font-size:1.2rem; font-weight:300; letter-spacing:1px; }
      }
    }

    .logo-text { margin-left:1.5rem; font-size:24px; font-weight:700; color:#b8bfd0; }
  }

  &.sidebar-collapsed {
    width: 16.5625rem;
    .logo-container { display:flex; opacity:1; transform:scale(1); }
  }
}

.menu-btn {
  position: absolute;
  right: -14px;
  top: 3.5%;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #e0e6f0;
  border: 2px solid #e0e6f0;
  background-color: #16264a;
  &:hover i { color:#fff; }
  z-index: 10;
}

/* === buscador === */
.sidebar-search {
  position: sticky;
  top: 0;
  z-index: 3;
  display: flex;
  gap: .25rem;
  padding: .5rem;
  background: #1d3664;
  border-bottom: 1px solid rgba(255,255,255,.08);

  input[type="search"]{
    flex:1; min-width:0;
    border:1px solid rgba(255,255,255,.2);
    background:rgba(0,0,0,.1); color:#fafdff;
    border-radius:.5rem; padding:.5rem .75rem; outline:none;
  }
  .clear-btn{ border:0; background:transparent; cursor:pointer; display:grid; place-items:center; color:#fafdff; }
}

mark{ background:#ffe08a; color:#1d1d1d; padding:0 .1rem; border-radius:.2rem; }

.sidebar-nav{
  list-style:none; padding:.938rem; margin:0;
  display:flex; flex-direction:column; align-items:center; cursor:pointer;

  .sidebar-nav-item{
    width:100%; margin-bottom:.625rem;

    .sidebar-nav-link{
      position:relative;                /* para el chevron */
      display:flex; align-items:center;
      min-height:2.5rem;
      padding:.4rem .25rem;
      padding-right:2rem;               /* espacio para chevron */
      color:#c0c8d6; text-decoration:none;
      border-radius:10px; transition:all .3s ease;

      .sidebar-link-icon{
        font-size:18px; width:2rem; min-width:2rem;
        margin:0 .5rem; text-align:center; padding-top:3px;
      }

      .sidebar-link-text{
        font-size:13px; margin-right:.25rem;
        flex:1 1 auto; min-width:0; max-width:100%;
        /* ⇒ 1 línea si cabe; si no, se parte de forma normal */
        white-space: normal;
        word-break: normal;
        overflow-wrap: break-word;
        line-height:1.2;
      }
    }

    .sidebar-nav-link:hover{
      background-color:#2b4a8b; color:#fff;
      .menu-collapse-icon{ color:#fff; }
    }
  }
}

.active{
  background-color:#2a3e6c;
  .menu-collapse-icon,.sidebar-link-icon,.sidebar-link-text{ color:#fff; }
}

.active-sublevel{ color:#fff!important; }

/* chevron a la derecha sin quitar ancho al texto */
.menu-collapse-icon{
  position:absolute; right:.5rem; top:50%; transform:translateY(-50%);
  font-size:20px; width:1.25rem; min-width:1.25rem; text-align:center; color:#fafdff;
}

/* subniveles */
.sublevel-nav{
  list-style:none; margin-left:10px; border-left:1px solid #2c3f66;

  .sublevel-nav-item{
    .sublevel-nav-link{
      position:relative; display:flex; align-items:center;
      min-height:2.5rem; padding:.35rem .25rem; padding-right:2rem;
      color:#b8bfd0; text-decoration:none; border-radius:10px; transition:all .3s ease;

      .sublevel-link-icon{ font-size:16px; width:2rem; min-width:2rem; text-align:center; padding-top:5px; }

      .sublevel-link-text{
        font-size:13px; margin-left:.8rem;
        flex:1 1 auto; min-width:0; max-width:100%;
        white-space: normal;
        word-break: normal;
        overflow-wrap: break-word;
        line-height:1.2;
      }

      &:hover{ color:#fff; }
    }
  }
}

/* scroll */
.scrollwrap{ overflow-y:auto; visibility:hidden; height:calc(100% - 3.65rem - 3rem); }
.sidebar-nav, .scrollwrap:hover, .scrollwrap:focus{ visibility:visible; }
.scrollwrap_delayed{ transition:visibility .5s .2s; }
.scrollwrap_delayed:hover{ transition:visibility .2s .2s; }
.scrollwrap::-webkit-scrollbar{ width:6px; }
.scrollwrap::-webkit-scrollbar-track{ background:transparent; }
.scrollwrap::-webkit-scrollbar-thumb{ background-color:#345188; border-radius:20px; }
.scrollwrap{ scrollbar-width:thin; scrollbar-color:#345188 transparent; }

/* Quita el espacio fantasma del icono en subniveles con hijos */
.sublevel-nav .sublevel-nav-item .sublevel-nav-link .sublevel-link-icon{
  display: none !important;
}

/* (opcional) asegúrate de no introducir padding extra en el enlace */
.sublevel-nav .sublevel-nav-item .sublevel-nav-link{
  padding-left: .25rem;   /* o lo que uses; no más indent aquí */
}

.sidebar-search {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: all 0.3s ease;
}

.sidebar.sidebar-collapsed .sidebar-search {
  max-height: 60px; /* ajusta según tu altura */
  opacity: 1;
}

/* ===== MODO MÓVIL: ocultar TODO el sidebar y dejar solo el botón ===== */
@media (max-width: 768px) {

  /* Asegura que el botón se vea aunque el contenedor tenga ancho 0 */
  .sidebar { overflow: visible; }

  /* Sidebar cerrado (collapsed = false) → ancho 0 y oculta todo menos el botón */
  .sidebar:not(.sidebar-collapsed) {
    width: 0 !important;
  }
  .sidebar:not(.sidebar-collapsed) > *:not(.menu-btn) {
    display: none !important;
  }

  /* Sidebar abierto (collapsed = true) → se muestra completo como siempre */
  .sidebar.sidebar-collapsed {
    width: 16.5625rem; /* tu ancho abierto */
  }
}

/* Móvil: oculta todo el panel cuando está "cerrado" (collapsed = false),
   pero deja visible el botón toggle, bien colocado. */
@media (max-width: 768px) {

  /* Que el contenedor no recorte al botón */
  .sidebar { overflow: visible; }

  /* Cerrado → ancho 0 y ocultar todo excepto el botón */
  .sidebar:not(.sidebar-collapsed) {
    width: 0 !important;
  }
  .sidebar:not(.sidebar-collapsed) > *:not(.menu-btn) {
    display: none !important;
  }

  /* Reposicionar el botón para que no quede cortado al borde */
  .sidebar:not(.sidebar-collapsed) .menu-btn {
    position: fixed;     /* se “despega” del ancho 0 del sidebar */
    left: 2px;           /* pegado al borde izq. */
    right: auto;         /* anulamos el right:-14px original */
    top: 3.5%;
    z-index: 1001;       /* por encima del contenido */
  }

  /* Abierto → se muestra normal con tu ancho expandido */
  .sidebar.sidebar-collapsed {
    width: 16.5625rem;   /* tu ancho abierto */
  }
}
