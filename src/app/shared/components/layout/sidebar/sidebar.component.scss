.sidebar {
  background-color: #1d3664;
  transition: all 0.5s ease;
  position: fixed;
  z-index: 2;
  top: 0;
  width: 5rem;
  height: 100vh;
  box-shadow: 0.063rem 0 1.25rem 0 #1a294b;
  color: #fafdff;

  .logo-container {
    display: none;
    opacity: 0;
    transform: scale(0.95);
    transition: all 0.3s ease;

    .head {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;

      .logo {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        line-height: 1.1;

        .logo-line-1 { color:#fff; font-size:2.2rem; font-weight:700; letter-spacing:.5px; }
        .logo-line-2 { color:#fff; font-size:1.2rem; font-weight:300; letter-spacing:1px; }
      }
    }

    .logo-text { margin-left:1.5rem; font-size:24px; font-weight:700; color:#b8bfd0; }
  }

  &.sidebar-collapsed {
    width: 16.5625rem;
    .logo-container { display:flex; opacity:1; transform:scale(1); }
  }
}

.menu-btn {
  position: absolute;
  right: -14px;
  top: 3.5%;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #e0e6f0;
  border: 2px solid #e0e6f0;
  background-color: #16264a;
  &:hover i { color:#fff; }
  z-index: 10;
}

/* === buscador === */
.sidebar-search {
  position: sticky;
  top: 0;
  z-index: 3;
  display: flex;
  gap: .25rem;
  padding: .5rem;
  background: #1d3664;
  border-bottom: 1px solid rgba(255,255,255,.08);

  input[type="search"]{
    flex:1; min-width:0;
    border:1px solid rgba(255,255,255,.2);
    background:rgba(0,0,0,.1); color:#fafdff;
    border-radius:.5rem; padding:.5rem .75rem; outline:none;
  }
  .clear-btn{ border:0; background:transparent; cursor:pointer; display:grid; place-items:center; color:#fafdff; }
}

mark{ background:#ffe08a; color:#1d1d1d; padding:0 .1rem; border-radius:.2rem; }

.sidebar-nav{
  list-style:none; padding:.938rem; margin:0;
  display:flex; flex-direction:column; align-items:center; cursor:pointer;

  .sidebar-nav-item{
    width:100%; margin-bottom:.625rem;

    .sidebar-nav-link{
      position:relative;                /* para el chevron */
      display:flex; align-items:center;
      min-height:2.5rem;
      padding:.4rem .25rem;
      padding-right:2rem;               /* espacio para chevron */
      color:#c0c8d6; text-decoration:none;
      border-radius:10px; transition:all .3s ease;

      .sidebar-link-icon{
        font-size:18px; width:2rem; min-width:2rem;
        margin:0 .5rem; text-align:center; padding-top:3px;
      }

      .sidebar-link-text{
        font-size:13px; margin-right:.25rem;
        flex:1 1 auto; min-width:0; max-width:100%;
        white-space: normal;
        word-break: normal;
        overflow-wrap: break-word;
        line-height:1.2;
      }
    }

    .sidebar-nav-link:hover{
      background-color:#2b4a8b; color:#fff;
      .menu-collapse-icon{ color:#fff; }
    }
  }
}

.active{
  background-color:#2a3e6c;
  .menu-collapse-icon,.sidebar-link-icon,.sidebar-link-text{ color:#fff; }
}

.active-sublevel{ color:#fff!important; }

/* chevron a la derecha sin quitar ancho al texto */
.menu-collapse-icon{
  position:absolute; right:.5rem; top:50%; transform:translateY(-50%);
  font-size:20px; width:1.25rem; min-width:1.25rem; text-align:center; color:#fafdff;
}

/* subniveles */
.sublevel-nav{
  list-style:none; margin-left:10px; border-left:1px solid #2c3f66;

  .sublevel-nav-item{
    .sublevel-nav-link{
      position:relative; display:flex; align-items:center;
      min-height:2.5rem; padding:.35rem .25rem; padding-right:2rem;
      color:#b8bfd0; text-decoration:none; border-radius:10px; transition:all .3s ease;

      .sublevel-link-icon{ font-size:16px; width:2rem; min-width:2rem; text-align:center; padding-top:5px; }

      .sublevel-link-text{
        font-size:13px; margin-left:.8rem;
        flex:1 1 auto; min-width:0; max-width:100%;
        white-space: normal;
        word-break: normal;
        overflow-wrap: break-word;
        line-height:1.2;
      }

      &:hover{ color:#fff; }
    }
  }
}

/* scroll general */
.scrollwrap{ overflow-y:auto; visibility:hidden; height:calc(100% - 3.65rem - 3rem); }
.sidebar-nav, .scrollwrap:hover, .scrollwrap:focus{ visibility:visible; }
.scrollwrap_delayed{ transition:visibility .5s .2s; }
.scrollwrap_delayed:hover{ transition:visibility .2s .2s; }
.scrollwrap::-webkit-scrollbar{ width:6px; }
.scrollwrap::-webkit-scrollbar-track{ background:transparent; }
.scrollwrap::-webkit-scrollbar-thumb{ background-color:#345188; border-radius:20px; }
.scrollwrap{ scrollbar-width:thin; scrollbar-color:#345188 transparent; }

/* Quita el espacio fantasma del icono en subniveles con hijos */
.sublevel-nav .sublevel-nav-item .sublevel-nav-link .sublevel-link-icon{
  display: none !important;
}
.sublevel-nav .sublevel-nav-item .sublevel-nav-link{
  padding-left: .25rem;
}

/* animaci√≥n buscador */
.sidebar-search {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: all 0.3s ease;
}
.sidebar.sidebar-collapsed .sidebar-search {
  max-height: 60px;
  opacity: 1;
}

/* ===== MODO M√ìVIL ===== */
@media (max-width: 768px) {
  .sidebar { overflow: visible; }
  .sidebar:not(.sidebar-collapsed) {
    width: 0 !important;
  }
  .sidebar:not(.sidebar-collapsed) > *:not(.menu-btn) {
    display: none !important;
  }
  .sidebar:not(.sidebar-collapsed) .menu-btn {
    position: fixed;
    left: 2px;
    right: auto;
    top: 3.5%;
    z-index: 1001;
  }
  .sidebar.sidebar-collapsed {
    width: 16.5625rem;
  }
}

/* ==== FAVORITOS ==== */
.favorites-section {
  padding: .5rem .75rem;
  border-bottom: 1px solid rgba(255,255,255,.1);
  margin-bottom: .5rem;
  display: flex;
  flex-direction: column;

  .favorites-title {
    font-size: 12px;
    font-weight: 600;
    color: #ffffff;
    margin: 0 0 .25rem .5rem;
    text-transform: uppercase;
    letter-spacing: .5px;
  }

  .sidebar-nav-item .sidebar-nav-link {
    background: rgba(255, 214, 79, 0.055);
  }
  .sidebar-nav-item .sidebar-nav-link:hover {
    background: rgba(255, 214, 79, 0.075);
  }
}

/* ================================
   üé® Favoritos - Sidebar
   ================================ */

/* ===== Tokens (configurables) ===== */
.sidebar {
  --fav-visible-rows: 7;   /* üëà cambia a 8 si prefieres el l√≠mite en 8 */
  --fav-item-h: 32px;       /* alto de cada fila */
  --fav-gap-y: 6px;         /* separaci√≥n vertical entre filas */
}

/* ===== Encabezado ===== */
.sidebar .favorites-section {
  padding-bottom: 6px;

  .favorites-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    margin: 6px 10px 4px;
  }

  .favorites-title {
    margin: 0;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: .08em;
    text-transform: uppercase;
    opacity: .75;
  }

  .uxui-badge {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: .06em;
    line-height: 1;
    padding: 3px 8px;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,.18);
    opacity: .8;
    white-space: nowrap;
    user-select: none;
  }
}

/* ===== Lista con scroll ===== */
.sidebar .favorites-section .favorites-list {
  list-style: none;
  padding: 0 8px 6px;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--fav-gap-y);

  max-height: calc(
    var(--fav-visible-rows) * var(--fav-item-h) +
    (var(--fav-visible-rows) - 1) * var(--fav-gap-y)
  );
  overflow-y: auto;
  overflow-x: hidden;
}

/* Scrollbar estilizada */
.sidebar .favorites-section .favorites-list::-webkit-scrollbar { width: 6px; }
.sidebar .favorites-section .favorites-list::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,.25);
  border-radius: 4px;
}
.sidebar .favorites-section .favorites-list:hover::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,.4);
}

/* ===== √çtems de favoritos arriba ===== */
.sidebar .favorite-item {
  margin: 0;
  position: relative;
}

.sidebar .favorite-item .sidebar-nav-link {
  min-height: var(--fav-item-h);
  padding: 6px 10px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sidebar .favorite-item .sidebar-link-icon {
  width: 18px;
  height: 18px;
  font-size: 18px;
}

.sidebar .favorite-item .sidebar-link-text {
  font-size: 12.5px;
  line-height: 1.15;
  letter-spacing: .01em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== Bot√≥n "X" SOLO en favoritos ===== */
.sidebar .favorite-item .remove-fav {
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%) translateX(4px);
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;

  /* Oculto por defecto */
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 120ms ease, transform 120ms ease, visibility 0s linear 120ms;

  mat-icon {
    font-size: 16px;
    width: 16px; height: 16px; line-height: 16px;
    color: #e57373;
  }

  &:hover mat-icon {
    color: #ef5350;
    transform: scale(1.1);
  }
}

/* Mostrar solo en hover/focus */
.sidebar .favorite-item:hover .remove-fav,
.sidebar .favorite-item:focus-within .remove-fav {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transform: translateY(-50%) translateX(0);
  transition: opacity 120ms ease, transform 120ms ease, visibility 0s;
}

/* Siempre visible en t√°ctiles */
@media (hover: none) {
  .sidebar .favorite-item .remove-fav {
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    transform: translateY(-50%);
    transition: none;
  }
}

/* ================================
   ‚≠ê Estrellas en men√∫ normal (subniveles)
   ================================ */
.sublevel-leaf {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.fav-btn {
  border: none;
  background: transparent;
  cursor: pointer;
  padding: 0 .25rem;
  display: flex;
  align-items: center;
  justify-content: center;

  mat-icon {
    font-size: 15px;
    line-height: 1;
    color: #c0c8d6;
    transition: transform .15s ease, color .15s ease;
  }

  &:hover mat-icon {
    color: #ffd54f;
    transform: scale(1.1);
  }
}

.active-sublevel .fav-btn mat-icon {
  color: #ffd54f;
}
